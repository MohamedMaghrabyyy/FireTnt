<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Properties</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-900">

<div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-6">Available Properties</h1>

    <!-- Flash message -->
    <div th:if="${success}" id="flash-message" class="mb-6">
        <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative" role="alert">
            <strong class="font-bold">Success! </strong>
            <span th:text="${success}">Property created successfully!</span>
        </div>
    </div>
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
        <div th:each="property : ${properties}" class="bg-white rounded-2xl shadow p-4 hover:shadow-lg transition">
            <h2 class="text-xl font-semibold mb-2" th:text="${property.title}">Property Name</h2>
            <p class="text-sm text-gray-600 mb-1">Type: <span th:text="${property.description}">Apartment</span></p>
            <p class="text-sm text-gray-600 mb-2">Price: $<span th:text="${property.pricePerNight}">1000</span></p>
            <p class="text-sm text-gray-600 mb-2">Host ID: <span th:text="${property.hostId}">1</span></p>
            <p class="text-sm text-gray-600 mb-2">Status: <span th:text="${property.booked ? 'Booked' : 'Available'}" th:classappend="${property.booked} ? 'text-red-500' : 'text-green-500'">Available</span></p>

            <a th:href="@{/api/properties/{id}(id=${property.propertyId})}" class="inline-block bg-blue-600 text-white text-sm font-medium px-4 py-2 rounded hover:bg-blue-700">
                View Details
            </a>
        </div>
    </div>
</div>
<script>
    // Auto-hide flash message after 2 seconds
    setTimeout(function() {
        const flash = document.getElementById('flash-message');
        if (flash) {
            flash.style.display = 'none';
        }
    }, 2000);
</script>
</body>
</html>
